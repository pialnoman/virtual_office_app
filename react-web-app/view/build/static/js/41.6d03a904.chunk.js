(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[41],{1495:function(e,t,a){"use strict";a.r(t);var s=a(1),l=a(32),o=a(493),r=a(814),n=a.n(r),c=a(0),d=a.n(c),i=(a(632),a(515)),u=a(98),b=a(9),j=a(505),m=a(532),p=a(644),h=(a(685),a(509),a(74)),f=a.n(h),_=a(513),O=a.n(_),v=a(149),g=a(117),y=a(3),x=function(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),s=a[0],r=a[1],n=Object(u.c)((function(e){var t=[];return Array.from(e.holidays.data).forEach((function(e,a){t.push({label:e.holiday_title,value:e.id,data:e})})),t})),d=Object(c.useState)([]),p=Object(l.a)(d,2),h=p[0],f=p[1],_=Object(c.useState)(""),x=Object(l.a)(_,2),k=x[0],w=x[1],S=Object(u.c)((function(e){var t=[];return Array.from(e.worktypes.data).forEach((function(e,a){t.push({label:e.title,value:e.title,description:e.description,data:e})})),console.log("worktype",t),t})),D=Object(u.b)(),C=(Object(j.h)(e.employee.id),Object(m.a)({initialValues:{project:"",task_title:"",actual_work_done:"",hours:"",hours_type:"",wbs:"",hour_description:"",assignee:e.employee},validateOnChange:!0,validateOnBlur:!0,validate:function(e){var t={};return e.hours_type||(t.hours_type="Hour Type is required!"),e.project||(t.project="Project is required!"),e.wbs||(t.wbs="Wbs is required!"),e.actual_work_done||(t.actual_work_done="Details is required!"),parseInt(e.hours)<1&&(t.hours="Invalid hours value!"),t},onSubmit:function(t){console.log("values",C.values);var a={hours_type:C.values.hours_type,hours:C.values.hours,hour_description:C.values.hour_description?C.values.hour_description:"",assignee:e.employee,actual_work_done:C.values.actual_work_done,project:C.values.project,wbs:C.values.wbs,task_title:C.values.task_title};b.a.post("wbs/time-card/add/",a).then((function(t){console.log(t.data),e.onClose(),r(!s),C.resetForm(),T({label:null,value:null}),z(),V(null),w(null),O()("Successfully Added!","","success")})),r(!1)}}));Object(c.useEffect)((function(){console.log("add tc props",e.employee),D(Object(v.b)()),D(Object(g.d)());var t=[];b.a.get("project/assigned/all/"+e.employee+"/").then((function(e){console.log("assigned projects",e.data);for(var a=0;a<e.data.data.length;a++)t.push({label:e.data.data[a].project.sub_task,value:e.data.data[a].project.id,data:e.data.data[a]});console.log("temp p",t),f(t)}))}),[e]);var M=Object(c.useState)({label:"",value:""}),N=Object(l.a)(M,2),Y=N[0],T=N[1],F=Object(c.useState)(),P=Object(l.a)(F,2),A=P[0],z=P[1],W=Object(c.useState)(),H=Object(l.a)(W,2),E=H[0],V=H[1],B=function(){C.resetForm(),T({label:null,value:null}),z(),V(null),w(null)};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(o.B,{closeOnBackdrop:!1,show:e.show,onClose:function(){e.onClose(),B()},toggle:e.toggle,size:"lg",children:[Object(y.jsxs)(o.t,{children:[Object(y.jsx)(o.E,{closeButton:!0,children:"Enter New Timecard Item Details"}),Object(y.jsx)(o.C,{children:Object(y.jsxs)(o.K,{children:[Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{className:"custom-label-5",htmlFor:"assigneeSelectPM",loseMenuOnSelect:!0,isClearable:!1,isMulti:!1,children:"Hour Type :"}),Object(y.jsx)(i.a,{id:"hours_type",name:"hours_type",options:S,onChange:function(e){T(e),"RHR"!=e.label&&"WFH"!=e.label&&"OTO"!=e.label&&"OTS"!=e.label?(console.log("if"),C.setValues({hours_type:e.value,actual_work_done:e.description})):(console.log("else"),C.setValues({hours_type:e.value,actual_work_done:""}))},value:Y}),C.touched.hours_type&&C.errors.hours_type&&Object(y.jsx)("small",{style:{color:"red"},children:C.errors.hours_type})]}),"HOL"==Y.label&&Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{className:"custom-label-wbs5",children:"Select Holiday : "}),Object(y.jsx)(i.a,{id:"project",name:"project",className:"custom-forminput-5",onChange:function(e,t){console.log(e),C.setFieldValue("hours",e.data.hours)},options:n})]}),Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{className:"custom-label-wbs5",children:" Hour(s) : "}),Object(y.jsx)(o.y,{type:"number","aria-label":"default input example",id:"hours",name:"hours",className:"custom-forminput-5",placeholder:"0.00",min:"0.00",onChange:function(e){C.setFieldValue("hours",e.target.value)},value:C.values.hours}),C.touched.hours&&C.errors.hours&&Object(y.jsx)("small",{style:{color:"red"},children:C.errors.hours})]}),Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsxs)(o.z,{className:"custom-label-wbs5",htmlFor:"assigneeSelectPM",loseMenuOnSelect:!0,isClearable:!1,isMulti:!1,children:["Project :"," "]}),Object(y.jsx)(i.a,{id:"project",name:"project",className:"custom-forminput-5",onChange:function(t){w(t),console.log("selected Project",t.value),C.setFieldValue("project",t.value);for(var a=[],s=0;s<t.data.project.wbs_list.length;s++)parseInt(t.data.project.wbs_list[s].assignee_id)==parseInt(e.employee)&&a.push({value:t.data.project.wbs_list[s].id,label:t.data.project.wbs_list[s].title,data:t.data.project.wbs_list[s]});z(a)},options:h,value:k}),C.touched.project&&C.errors.project&&Object(y.jsx)("small",{style:{color:"red"},children:C.errors.project})]}),Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{className:"custom-label-5",htmlFor:"assigneeSelectPM",loseMenuOnSelect:!0,isClearable:!1,isMulti:!1,children:"WBS :"}),Object(y.jsx)(i.a,{id:"wbs",name:"wbs",className:"custom-forminput-5",options:A,onChange:function(e){V(e),console.log("WBS",e),C.setFieldValue("wbs",e.value)},value:E}),C.touched.wbs&&C.errors.wbs&&Object(y.jsx)("small",{style:{color:"red"},children:C.errors.wbs})]}),Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{children:"Actual Work :"}),Object(y.jsx)(o.V,{type:"text",id:"actual_work_done",name:"actual_work_done",className:"custom-forminput-5",onChange:function(e){C.setFieldValue("actual_work_done",e.target.value)},value:C.values.actual_work_done}),C.touched.actual_work_done&&C.errors.actual_work_done&&Object(y.jsx)("small",{style:{color:"red"},children:C.errors.actual_work_done})]})]})})]}),Object(y.jsxs)(o.D,{children:[Object(y.jsx)(o.f,{color:"primary",type:"button",onClick:C.handleSubmit,children:"Add"})," ",Object(y.jsx)(o.f,{color:"secondary",type:"button",onClick:function(){e.onClose(),B()},children:"Cancel"})]})]})})},k=function(e){var t,a,s,l=Object(u.c)((function(e){var t=[];return Array.from(e.worktypes.data).forEach((function(e,a){t.push({label:e.title,value:e.title,description:e.description,data:e})})),t})),r=Object(m.a)({initialValues:{actual_work_done:"",time_type:"",hours_today:"",date_updated:""},onSubmit:function(t,a){a.setSubmitting;console.log(t),b.a.put("wbs/time-card/update/"+e.data.id+"/",t).then((function(t){console.log(t.data),200==t.status&&"OK"==t.statusText&&(r.resetForm(),e.onClose(),O()("Well Done!","Your timecard is updated","success"))})).catch((function(e){console.log(e)}))}});Object(c.useEffect)((function(){e.data&&r.setValues({actual_work_done:e.data.actual_work_done,time_type:e.data.time_type,hours_today:e.data.hours_today,date_updated:e.data.date_updated})}),[e.data]);var n=f()().subtract(7,"days"),d=f()().add(1,"days"),j=n.format("YYYY-MM-DD"),p=d.format("YYYY-MM-DD");return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(o.B,{show:e.show,onClose:function(){return e.onClose()},toggle:e.toggle,size:"lg",children:[Object(y.jsxs)(o.E,{closeButton:!0,children:[" ","Project Name (Work Package) :"," ",null!=(null===(t=e.data)||void 0===t?void 0:t.project)?e.data.project.sub_task+"("+(null===(a=e.data)||void 0===a?void 0:a.project.work_package_number)+")":"N/A"]}),Object(y.jsx)(o.C,{children:Object(y.jsxs)(o.K,{children:[Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{className:"custom-label-5",htmlFor:"assigneeSelectPM",loseMenuOnSelect:!0,isClearable:!1,isMulti:!1,children:"Type :"}),Object(y.jsx)(i.a,{options:l,onChange:function(e,t){console.log(e),r.setFieldValue("time_type",e.value)},defaultValue:[{label:"RHR",value:"RHR"},{label:"SIC",value:"SIC"},{label:"VAC",value:"VAC"},{label:"OTS",value:"OTS"},{label:"OTO",value:"OTO"},{label:"HOL",value:"HOL"},{label:"WFH",value:"WFH"},{label:"COM",value:"COM"},{label:"PB1",value:"PB1"},{label:"PB2",value:"PB2"}].filter((function(t){var a;return t.value===(null===(a=e.data)||void 0===a?void 0:a.time_type)}))})]}),Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{class:"form-label",children:" Hour(s):"}),Object(y.jsx)(o.y,{className:"custom-forminput-5",type:"number","aria-label":"default input example",id:"hours_today",name:"hours_today",placeholder:"0.00",min:"0.00",value:r.values.hours_today,onChange:r.handleChange})]}),Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{class:"form-label",children:" Date:"}),Object(y.jsx)(o.y,{className:"custom-forminput-5",type:"date","aria-label":"default input example",id:"date_updated",name:"date_updated",min:j,max:p,value:r.values.date_updated,onChange:r.handleChange})]}),Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{class:"form-label",children:" Task Title : "}),Object(y.jsx)(o.y,{value:null!=(null===(s=e.data)||void 0===s?void 0:s.project)?e.data.project.task_title:"N/A",disabled:!0})]}),Object(y.jsxs)(o.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(o.z,{class:"form-label",children:"Actual Work :"}),Object(y.jsx)(o.V,{class:"form-control",id:"actual_work_done",name:"actual_work_done",rows:"3",value:r.values.actual_work_done,onChange:r.handleChange,children:" "})]})]})}),Object(y.jsxs)(o.D,{children:[Object(y.jsx)(o.f,{color:"primary",onClick:r.handleSubmit,children:"save"})," ",Object(y.jsx)(o.f,{color:"secondary",onClick:function(){e.onClose(),r.setValues({actual_work_done:e.data.actual_work_done,time_type:e.data.time_type,hours_today:e.data.hours_today,date_updated:e.data.date_updated})},children:"Cancel"})]})]})})},w=a(14);t.default=function(){var e,t,a=Object(u.c)((function(e){return e.profile.data})),r=Object(c.useState)(),h=Object(l.a)(r,2),_=h[0],v=h[1],g=(Object(u.b)(),Object(c.useState)(0)),S=Object(l.a)(g,2),D=S[0],C=(S[1],Object(c.useState)([])),M=Object(l.a)(C,2),N=M[0],Y=M[1],T=Object(c.useState)([]),F=Object(l.a)(T,2),P=F[0],A=F[1],z=Object(c.useState)(),W=Object(l.a)(z,2),H=(W[0],W[1]),E=Object(w.h)(),V=Object(c.useState)([]),B=Object(l.a)(V,2),I=B[0],K=B[1],q=Object(c.useState)(0),R=Object(l.a)(q,2),L=R[0],J=R[1],U=Object(c.useState)(""),G=Object(l.a)(U,2),Q=G[0],X=G[1],Z=Object(c.useState)(""),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)(0),se=Object(l.a)(ae,2),le=se[0],oe=se[1],re=Object(c.useState)(""),ne=Object(l.a)(re,2),ce=(ne[0],ne[1]),de=Object(c.useState)(),ie=Object(l.a)(de,2),ue=ie[0],be=ie[1],je=function(e){console.log("get_tc",e);var t=we(),a=t.start,s=t.end;H(e.first_name+" "+e.last_name),b.a.get("wbs/user/time-card/list/"+e.id+"/").then((function(e){console.log("assignee tc",e.data);var t=[];Array.from(e.data.data).forEach((function(a,s){console.log("res",e.data.data),t.push({data:a})}));var l;l=t.filter((function(e){return e.data.date_updated>=a&&e.data.date_updated<=s})),console.log("filtered",l),A(l);for(var o=[],r=0,c=0,d=0;d<l.length;d++){var i,u,b,j;0==l[d].data.submitted&&c++;var m=l[d];r+=parseFloat(m.data.hours_today),console.log("ele",m.data),o.push({WP:m.data.project?m.data.project.work_package_number:"-","Project Name":null!=m.data.project?null===(i=m.data.project)||void 0===i?void 0:i.sub_task:"-","Task Title":null!=m.data.project?null===(u=m.data.project)||void 0===u?void 0:u.task_title:"-",Description:null!==(b=m.data)&&void 0!==b&&b.actual_work_done?null===(j=m.data)||void 0===j?void 0:j.actual_work_done:"-","Hour(s)":m.data.hours_today,Type:m.data.time_type,"Work Date":m.data.date_updated,data:m.data,id:m.data.id})}oe(r),Y(n()(o,"id","desc")),J(c),console.log("selected",_)}))};function me(e){return void 0!=e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}var pe=Object(c.useState)(!1),he=Object(l.a)(pe,2),fe=he[0],_e=he[1],Oe=Object(c.useState)(!1),ve=Object(l.a)(Oe,2),ge=ve[0],ye=ve[1];d.a.useEffect((function(){console.log("executing effect"),window.scrollTo(0,0);var e=we();e.start,e.end;oe(0),Object(j.g)("projects.change_projectassignee")||Object(j.g)("projects.add_projectassignee")?b.a.get("project/assignees/all/"+sessionStorage.getItem(b.k)+"/").then((function(e){var t=[];if(Array.from(e.data.data).forEach((function(e,a){t.push({data:e,value:e.id,label:me(e.first_name)+" "+me(e.last_name)})})),t.find((function(t){return t.value==e.data.user.id}))||t.unshift({data:e.data.user,value:e.data.user.id,label:me(e.data.user.first_name)+" "+me(e.data.user.last_name)}),K(n()(t,"label")),null==_||void 0==_){var a;if(null!==(a=E.state)&&void 0!==a&&a.assignee&&t.length>0){var s=E.state.assignee;v(t.find((function(e){return e.value==s}))),je(t.find((function(e){return e.value==s})).data)}else v({data:e.data.user,value:e.data.user.id,label:me(e.data.user.first_name)+" "+me(e.data.user.last_name)}),je(e.data.user);H(me(e.data.user.first_name)+" "+me(e.data.user.last_name))}})):null!=_&&void 0!=_||(v({data:a,value:a.id,label:me(a.first_name)+" "+me(a.last_name)}),H(me(a.first_name)+" "+me(a.last_name)),je(a))}),[D]),Object(c.useEffect)((function(){var e;if(null!==(e=E.state)&&void 0!==e&&e.assignee&&I.length>0){var t=E.state.assignee;console.log("predefined id",t),console.log("found user",I.find((function(e){return e.value==t}))),v(I.find((function(e){return e.value==t}))),H(I.find((function(e){return e.value==t})).label),je(I.find((function(e){return e.value==t})).data),console.log(I.find((function(e){return e.value==t})).data,"from useeffect")}}),[I]);var xe=Object(m.a)({initialValues:{assigneeSelect:sessionStorage.getItem(b.k),assigneeSelectPM:sessionStorage.getItem(b.k),startDate:"",todate:""},validateOnBlur:!0,validateOnChange:!0,validate:function(e){var t={};return e.startDate||(t.startDate="Start Date selection is required"),e.todate||(t.todate="To date selection is required"),t},onSubmit:function(e){console.log("working"),X(e.startDate),te(e.todate);var t=0;Object(j.g)("projects.add_projects")&&Object(j.g)("wbs.change_timecard")&&Object(j.g)("wbs.add_timecard")?b.a.get("wbs/user/time-card/list/"+e.assigneeSelectPM+"/").then((function(a){console.log(a.data.data);var s=[];Array.from(a.data.data).forEach((function(e,t){s.push({data:e})}));var l;l=s.filter((function(t){return t.data.date_updated>=e.startDate&&t.data.date_updated<=e.todate})),A(l);for(var o=[],r=0;r<l.length;r++){var n,c,d=l[r];t+=parseFloat(d.data.hours_today),o.push({WP:null!==(n=d.data.project)&&void 0!==n&&n.work_package_number?d.data.project.work_package_number:"-","Project Name":null!==(c=d.data.project)&&void 0!==c&&c.sub_task?d.data.project.sub_task:"-","Task Title":d.data.project.task_title?d.data.project.task_title:"-",Description:d.data.actual_work_done?d.data.actual_work_done:"-","Hour(s)":d.data.hours_today,Type:d.data.time_type,"Work Date":d.data.date_updated,data:d.data})}oe(t),Y(o)})):b.a.get("wbs/user/time-card/list/"+e.assigneeSelect+"/").then((function(s){var l=[];H(a.first_name+" "+a.last_name),Array.from(s.data.data).forEach((function(e,t){l.push({data:e})}));var o;o=l.filter((function(t){return t.data.date_updated>=e.startDate&&t.data.date_updated<=e.todate})),console.log("timecard for id",o),A(o),ce(o);for(var r=[],n=0;n<o.length;n++){var c,d=o[n];t+=parseFloat(d.data.hours_today),r.push({WP:d.data.project?d.data.project.work_package_number:"-","Project Name":null!=d.data.project?null===(c=d.data.project)||void 0===c?void 0:c.sub_task:"-","Task Title":null!=d.data.project?d.data.project.task_title:"-",Description:d.data.actual_work_done?d.data.actual_work_done:"","Hour(s)":d.data.hours_today,Type:d.data.time_type,"Work Date":d.data.date_updated,data:d.data})}console.log("table",r),Y(r),oe(t)}))}}),ke={option:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{fontSize:"14px !important"})}},we=function(){for(var e=new Date,t=new Date,a=0;a<7;a++){if(0===e.getDay()){console.log("start",e);break}e=f()(e).subtract(1,"day").toDate()}return console.log("end date",t),X(f()(e).format("YYYY-MM-DD")),te(Se()),{start:f()(e).format("YYYY-MM-DD"),end:Se()}},Se=function(){for(var e=new Date,t=0;t<7;t++){if(6===e.getDay()){console.log("sat",e);break}e=f()(e).add(1,"day").toDate()}return e=f()(e).format("YYYY-MM-DD"),console.log("satday",e),e};return Object(y.jsxs)(y.Fragment,{children:[null!=ue&&void 0!=ue&&Object(y.jsx)(k,{data:ue,show:ge,onClose:function(){ye(!1),je(_.data)}}),_&&Object(y.jsx)(x,{employee:_.value,show:fe,onClose:function(){_e(!1),je(_.data)},onAdd:xe.handleSubmit}),Object(y.jsxs)(o.l,{children:[Object(y.jsx)(o.K,{className:"justify-content-between",children:Object(y.jsx)(o.k,{children:Object(y.jsx)("h3",{className:"timecards-page-header mb-3",children:"Actual Hours of this week"})})}),Object(y.jsx)(o.t,{children:Object(y.jsxs)(o.K,{children:[Object(y.jsx)(o.k,{xl:"3",lg:"3",md:"6",children:Object(j.g)("projects.add_projects")&&Object(y.jsxs)("div",{children:[Object(y.jsx)(o.z,{className:"custom-label-5",htmlFor:"assigneeSelectPM",children:"Select Employee"}),Object(y.jsx)(i.a,{closeMenuOnSelect:!0,"aria-labelledby":"assigneeSelectPM",id:"assigneeSelectPM",minHeight:"35px",placeholder:me(a.first_name)+" "+me(a.last_name),isClearable:!1,isMulti:!1,onChange:function(e){v(e),H(e.label),je(e.data)},classNamePrefix:"custom-forminput-6",options:I,styles:ke,value:_})]})}),Object(y.jsx)(o.K,{className:"mt-4",children:Object(y.jsx)(o.k,{})}),Object(y.jsx)(o.K,{children:Object(y.jsx)(o.k,{md:"4",children:Object(y.jsxs)(o.z,{className:"custom-label-5",htmlFor:"assigneeSelect",children:["Employee Name :"," ",me(null===_||void 0===_||null===(e=_.data)||void 0===e?void 0:e.first_name)+" "+me(null===_||void 0===_||null===(t=_.data)||void 0===t?void 0:t.last_name)]})})}),Object(y.jsx)(o.K,{children:Object(y.jsx)(o.k,{children:Object(y.jsxs)(o.z,{className:"custom-label-5",htmlFor:"assigneeSelect",children:["Weekending :"," ",f()(Se()).format("dddd, DD MMMM YYYY")]})})}),xe.values.assigneeSelectPM==sessionStorage.getItem(b.k)==1&&Object(y.jsx)("div",{className:"format-buttons mt-3 mb-3",children:Object(y.jsxs)(o.f,{className:"file-format-download",type:"button",onClick:function(){_e(!0)},children:[" ","+ Add Item"]})}),Object(y.jsx)(o.k,{md:"12",children:Object(y.jsxs)("div",{className:"",children:[Object(y.jsx)(o.m,{items:N,fields:[{key:"WP",_style:{width:"5%"},_classes:"font-weight-bold"},"Project Name","Task Title","Description","Hour(s)","Type","Work Date","Action"],primary:!0,hover:!0,striped:!0,bordered:!0,sorter:!0,size:"sm",itemsPerPage:20,pagination:!0,scopedSlots:{Action:function(e){return Object(y.jsx)("td",{children:0==e.data.submitted?Object(y.jsx)(o.b,{children:Object(y.jsx)(o.f,{onClick:function(){be(e.data),ye(!0)},size:"sm",type:"button",color:"primary",children:"Edit"})}):Object(y.jsx)(o.b,{children:Object(y.jsx)(o.f,{size:"sm",type:"button",color:"secondary",disabled:!0,children:"Edit"})})})}}}),0!=le&&Object(y.jsx)("div",{class:"alert alert-info",role:"alert",children:Object(y.jsxs)(o.K,{children:[Object(y.jsx)(o.k,{md:"5"}),Object(y.jsx)(o.k,{md:"3",children:Object(y.jsxs)("small",{children:["     ","From ",Object(y.jsx)("b",{children:f()(Q).format("DD-MMM-YY")})," ","to ",Object(y.jsx)("b",{children:f()(ee).format("DD-MMM-YY")})]})}),Object(y.jsx)(o.k,{md:"4",children:Object(y.jsxs)("small",{children:["   ","Total"," ",Object(y.jsxs)("b",{children:[Number(le).toFixed(2)," ",Number(le).toFixed(2)>1?"hours":"hour","\xa0"]})]})})]})}),Object(y.jsx)(o.K,{className:"justify-content-end mb-5",children:Object(y.jsx)(o.k,{md:"1",className:"justify-content-end",children:Object(y.jsx)(o.f,{className:"file-format-download",type:"button",onClick:function(){O()({title:"Are you sure?",text:"Once submitted, you will not be able to revert!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(e){if(e){for(var t="",a=0;a<N.length;a++)a==N.length-1?t+=N[a].data.id:t+=N[a].data.id+",";var s=function(){var e=new p.default("portrait","pt","A4");e.setFontSize(15),_.data.first_name,_.data.last_name;var t={startY:145,head:[["WP","Project Name","Task Title","Description","Hour(s)","Type","Work Date"]],body:P.map((function(e,t){return[e.data.project.work_package_number,e.data.project.sub_task,e.data.project.task_title,e.data.actual_work_done,e.data.hours_today,e.data.time_type,e.data.date_updated]}))},a=new Date,s=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});a=f()(a).format("DD/MM/YY");var l=f()(ee).format("DD/MM/YYYY");return e.setFontSize(17),e.text(170,50,"Datasoft Manufacturing & Assembly"),e.setFontSize(13),e.text(245,75,"Gulshan Branch"),e.setFontSize(11),e.text(42,105,"Employee Time Card"),e.text(410,105,"Week-Ending: "+l),e.text(42,125,"Name: "+_.data.first_name+" "+_.data.last_name),new Date,e.autoTable(t),e.text(42,e.lastAutoTable.finalY+25,"From "+Q+" to "+ee),e.text(250,e.lastAutoTable.finalY+25," Total Hours "+Number(le).toFixed(2)),e.text(396,e.lastAutoTable.finalY+25,"Submitted on : "+s+"  "+a),e}(),l=new FormData;l.append("employee",_.value),l.append("time_cards",t),l.append("week_start",Q),l.append("week_end",ee),l.append("pdf_file",s.output("datauristring")),b.d.post("wbs/time-card/submit/",l).then((function(e){console.log(e.data);var t=new Date,a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],l=f()(t).format("DD-MM-YYYY");je(_.data),s.save(_.data.first_name+"_"+_.data.last_name+"_"+a+"_"+l+".pdf"),window.open(s.output("bloburl"),"_blank"),O()("Submitted","Your selected time cards are submitted!","success")}))}}))},style:{backgroundColor:"#e55353"},disabled:0==L,children:"Submit"})})})]})})]})})]})]})}},632:function(e,t,a){},814:function(e,t,a){var s=a(173),l=a(26);e.exports=function(e,t,a,o){return null==e?[]:(l(t)||(t=null==t?[]:[t]),l(a=o?void 0:a)||(a=null==a?[]:[a]),s(e,t,a))}}}]);
//# sourceMappingURL=41.6d03a904.chunk.js.map